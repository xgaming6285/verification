<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <title data-translate="meta.title">
      CreditoPro - Identity Verification
    </title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="verification-styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Navigation Bar -->
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-logo">
          <a href="index.html"><i class="fas fa-coins"></i> CreditoPro</a>
        </div>

        <div class="nav-menu" id="nav-menu">
          <a
            href="index.html#home"
            class="nav-link"
            data-translate="navigation.home"
            >Home</a
          >
          <a
            href="index.html#calculator"
            class="nav-link"
            data-translate="navigation.calculator"
            >Loans</a
          >
          <a
            href="index.html#how-it-works"
            class="nav-link"
            data-translate="navigation.how_it_works"
            >How it Works</a
          >
          <a
            href="index.html#contact"
            class="nav-link"
            data-translate="navigation.contact"
            >Contact</a
          >

          <div class="language-selector">
            <select id="language-select">
              <option value="bg">BG</option>
              <option value="en" selected>EN</option>
            </select>
          </div>
        </div>

        <div class="hamburger" id="hamburger">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </div>
      </div>
    </nav>

    <!-- Verification Section -->
    <section class="verification-page">
      <div class="container">
        <div class="verification-steps">
          <!-- Step 1: Personal Information -->
          <div class="verification-step active" id="step-1">
            <div class="step-header">
              <h2>Identity Verification</h2>
              <p>
                Complete the verification form to finalize your loan application
              </p>
            </div>

            <!-- Sub-steps container with sliding animation -->
            <div class="sub-steps-container" id="sub-steps-container">
              <!-- Sub-step 1: First Name -->
              <div
                class="personal-info-sub-step active"
                id="sub-step-1-1"
                data-sub-step="1"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-user"></i>
                  </div>
                  <h4 data-translate="verification.step1.first_name">
                    First Name
                  </h4>
                  <p>Please enter your first name as it appears on your ID</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="first-name"
                        name="firstName"
                        placeholder="Enter your first name"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-2: Last Name -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-2"
                data-sub-step="2"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-user-tag"></i>
                  </div>
                  <h4 data-translate="verification.step1.last_name">
                    Enter your personal information
                  </h4>
                  <p>Please enter your last name as it appears on your ID</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="last-name"
                        name="lastName"
                        placeholder="Enter your last name"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-3: Personal ID Number -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-3"
                data-sub-step="3"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-id-card"></i>
                  </div>
                  <h4 data-translate="verification.step1.egn">
                    Personal ID Number
                  </h4>
                  <p>Enter your 10-digit personal identification number</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="egn"
                        name="egn"
                        placeholder="Enter your personal ID number"
                        maxlength="10"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-4: Phone -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-4"
                data-sub-step="4"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-phone"></i>
                  </div>
                  <h4 data-translate="verification.step1.phone">
                    Phone Number
                  </h4>
                  <p>Enter your active phone number for verification</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="tel"
                        id="phone"
                        name="phone"
                        placeholder="Enter your phone number"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-5: Email -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-5"
                data-sub-step="5"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-envelope"></i>
                  </div>
                  <h4 data-translate="verification.step1.email">
                    Email Address
                  </h4>
                  <p>Enter your email address for important notifications</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="email"
                        id="email"
                        name="email"
                        placeholder="Enter your email address"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-6: Country -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-6"
                data-sub-step="6"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-globe"></i>
                  </div>
                  <h4>Country</h4>
                  <p>Select your country of residence</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <select
                        id="country"
                        name="country"
                        required
                        onchange="updateStateOptions()"
                      >
                        <option value="">Select your country</option>
                        <option value="BG">Bulgaria</option>
                        <option value="US">United States</option>
                        <option value="GB">United Kingdom</option>
                        <option value="DE">Germany</option>
                        <option value="FR">France</option>
                        <option value="CA">Canada</option>
                        <option value="AU">Australia</option>
                        <option value="IT">Italy</option>
                        <option value="ES">Spain</option>
                        <option value="NL">Netherlands</option>
                        <option value="IN">India</option>
                        <option value="BR">Brazil</option>
                        <option value="RU">Russia</option>
                        <option value="JP">Japan</option>
                        <option value="CN">China</option>
                      </select>
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-7: State/Province/Region -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-7"
                data-sub-step="7"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-map-marker-alt"></i>
                  </div>
                  <h4 id="state-label">State / Province / Region</h4>
                  <p id="state-description">
                    Select your state, province, or region
                  </p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <select
                        id="state-select"
                        name="state"
                        style="display: none"
                      >
                        <option value="">Select your state/province</option>
                      </select>
                      <input
                        type="text"
                        id="state-input"
                        name="state"
                        placeholder="Enter your state/province/region"
                        style="display: none"
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-8: City/Locality -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-8"
                data-sub-step="8"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-city"></i>
                  </div>
                  <h4>City / Locality</h4>
                  <p>Enter your city or locality</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="city"
                        name="city"
                        placeholder="Enter your city"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-9: Postal Code -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-9"
                data-sub-step="9"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-mail-bulk"></i>
                  </div>
                  <h4>Postal Code / ZIP Code</h4>
                  <p id="postal-description">
                    Enter your postal code or ZIP code
                  </p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="postal-code"
                        name="postalCode"
                        placeholder="Enter your postal code"
                        required
                      />
                      <small
                        id="postal-format-hint"
                        class="format-hint"
                      ></small>
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-10: Street Name -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-10"
                data-sub-step="10"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-road"></i>
                  </div>
                  <h4>Street Name</h4>
                  <p>Enter the name of your street</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="street-name"
                        name="streetName"
                        placeholder="e.g., Main Street, Oak Avenue"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-11: House Number -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-11"
                data-sub-step="11"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-hashtag"></i>
                  </div>
                  <h4>House Number</h4>
                  <p>Enter your house or building number</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="house-number"
                        name="houseNumber"
                        placeholder="e.g., 123, 45A, 7-9"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-12: Apartment/Suite/Floor (Optional) -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-12"
                data-sub-step="12"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-building"></i>
                  </div>
                  <h4>
                    Apartment / Suite / Floor
                    <span class="optional-label">(Optional)</span>
                  </h4>
                  <p>Enter apartment, suite, or floor number if applicable</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="apartment"
                        name="apartment"
                        placeholder="e.g., Apt 4B, Suite 200, Floor 3"
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-13: Monthly Income -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-13"
                data-sub-step="13"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-money-bill-wave"></i>
                  </div>
                  <h4 data-translate="verification.step1.income">
                    Monthly Income
                  </h4>
                  <p>Enter your average monthly income in BGN</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="number"
                        id="income"
                        name="income"
                        placeholder="Enter your monthly income"
                        min="0"
                        required
                      />
                      <span class="input-suffix">BGN</span>
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-14: Employment Status -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-14"
                data-sub-step="14"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-briefcase"></i>
                  </div>
                  <h4 data-translate="verification.step1.employment">
                    Employment Status
                  </h4>
                  <p>Select your current employment situation</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <select id="employment" name="employment" required>
                        <option
                          value=""
                          data-translate="verification.step1.employment_options.select"
                        >
                          Select your employment status
                        </option>
                        <option
                          value="employed"
                          data-translate="verification.step1.employment_options.employed"
                        >
                          Employed
                        </option>
                        <option
                          value="self-employed"
                          data-translate="verification.step1.employment_options.self_employed"
                        >
                          Self-employed
                        </option>
                        <option
                          value="retired"
                          data-translate="verification.step1.employment_options.retired"
                        >
                          Retired
                        </option>
                        <option
                          value="unemployed"
                          data-translate="verification.step1.employment_options.unemployed"
                        >
                          Unemployed
                        </option>
                      </select>
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="complete-personal-info-btn"
                        onclick="nextStep(2)"
                      >
                        <span>Continue to Photo Capture</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>

          <!-- Step 2: Camera Photo Capture -->
          <div class="verification-step" id="step-2">
            <div class="step-header">
              <h2>Photo Capture</h2>
              <p>
                Follow the guided process to capture all required photos using
                your camera
              </p>
            </div>

            <!-- Current Capture Section -->
            <div class="current-capture-section" id="current-capture-section">
              <div class="capture-instructions" id="capture-instructions">
                <div class="instruction-icon">
                  <i class="fas fa-id-card"></i>
                </div>
                <h4
                  id="instruction-title"
                  data-translate="verification.step2.instructions.id_front_title"
                >
                  Capture Front Side of ID
                </h4>
                <p
                  id="instruction-text"
                  data-translate="verification.step2.instructions.id_front_text"
                >
                  Position your ID card's front side in the frame and capture a
                  clear photo
                </p>
                <div class="camera-tips">
                  <div class="tip-item">
                    <i class="fas fa-lightbulb"></i>
                    <span data-translate="verification.step2.tips.lighting"
                      >Ensure good lighting</span
                    >
                  </div>
                  <div class="tip-item">
                    <i class="fas fa-hand-paper"></i>
                    <span data-translate="verification.step2.tips.steady"
                      >Keep the camera steady</span
                    >
                  </div>
                  <div class="tip-item">
                    <i class="fas fa-eye"></i>
                    <span data-translate="verification.step2.tips.readable"
                      >Make sure text is readable</span
                    >
                  </div>
                </div>
              </div>

              <div class="capture-controls">
                <button
                  type="button"
                  class="camera-start-btn"
                  id="start-camera-btn"
                  onclick="startCameraCapture()"
                >
                  <i class="fas fa-video"></i>
                  <span data-translate="verification.step2.start_camera"
                    >Start Camera</span
                  >
                </button>
              </div>
            </div>

            <div class="step-navigation">
              <button type="button" class="prev-btn" onclick="prevStep(1)">
                <i class="fas fa-arrow-left"></i>
                <span data-translate="verification.step2.back">Back</span>
              </button>
              <button
                type="button"
                class="next-btn"
                id="continue-to-complete"
                onclick="nextStep(3)"
                style="display: none"
              >
                <span data-translate="verification.step2.continue"
                  >Continue</span
                >
                <i class="fas fa-arrow-right"></i>
              </button>
            </div>
          </div>

          <!-- Full Screen Camera -->
          <div class="camera-capture-area" id="camera-capture-area">
            <div class="camera-header">
              <div class="camera-step-info">
                <h5 id="camera-step-title">Capture ID Front</h5>
                <p id="camera-step-description">
                  Position your ID card in the guide
                </p>
              </div>
              <button class="camera-close-btn" onclick="closeCameraCapture()">
                <i class="fas fa-times"></i>
              </button>
            </div>

            <video
              id="capture-video"
              autoplay
              muted
              playsinline
              webkit-playsinline
              style="display: none"
            ></video>
            <canvas id="capture-canvas" style="display: none"></canvas>

            <div class="camera-placeholder" id="camera-placeholder">
              <i class="fas fa-camera"></i>
              <p>Loading camera...</p>
            </div>

            <div
              class="camera-overlay"
              id="camera-overlay"
              style="display: none"
            >
              <!-- Guide overlays will be dynamically inserted here -->
            </div>

            <!-- Capture button positioned over the camera view -->
            <button
              type="button"
              class="capture-photo-btn hidden"
              id="capture-photo-btn"
              onclick="captureCurrentPhoto()"
            >
              <i class="fas fa-camera"></i>
              <span>Capture Photo</span>
            </button>
          </div>

          <!-- Step 3: Complete -->
          <div class="verification-step" id="step-3">
            <div class="step-header">
              <h2>Application Complete</h2>
              <p>Your verification has been processed successfully</p>
            </div>

            <div class="complete-content">
              <div class="complete-icon">
                <i class="fas fa-check-circle"></i>
              </div>
              <h3 data-translate="verification.step3.title">All Set!</h3>
              <p data-translate="verification.step3.description">
                Your verification photos have been captured successfully. We're
                now processing your application.
              </p>

              <div class="processing-info">
                <div class="processing-steps">
                  <h4 data-translate="verification.step3.next_steps">
                    What happens next:
                  </h4>
                  <ol>
                    <li data-translate="verification.step3.step_list.step1">
                      We will review your photos and information
                    </li>
                    <li data-translate="verification.step3.step_list.step2">
                      You'll receive an email with the decision
                    </li>
                    <li data-translate="verification.step3.step_list.step3">
                      Upon approval, funds will be transferred
                    </li>
                  </ol>
                </div>

                <div class="contact-info">
                  <p data-translate="verification.step3.contact_info">
                    For questions, contact us:
                  </p>
                  <p>
                    <i class="fas fa-phone"></i>
                    <span data-translate="contact.phone">0700 12 345</span>
                  </p>
                  <p>
                    <i class="fas fa-envelope"></i>
                    <span data-translate="contact.email"
                      >info@creditopro.bg</span
                    >
                  </p>
                </div>
              </div>

              <div class="final-actions">
                <button
                  type="button"
                  class="submit-application-btn"
                  onclick="submitApplication()"
                >
                  <span data-translate="verification.step3.submit"
                    >Submit Application</span
                  >
                  <i class="fas fa-paper-plane"></i>
                </button>
                <button
                  type="button"
                  class="back-home-btn"
                  onclick="window.location.href='index.html'"
                  style="display: none"
                >
                  <span data-translate="verification.step3.back_home"
                    >Back to Home</span
                  >
                  <i class="fas fa-home"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script src="js/translation-manager.js"></script>
    <script src="js/video-recorder.js"></script>
    <script src="verification.js"></script>

    <script>
      // Initialize video recording when verification page loads
      document.addEventListener("DOMContentLoaded", async function () {
        console.log(
          "🔍 Verification page loaded - checking video recording..."
        );

        // Get existing session ID from localStorage
        let sessionId = localStorage.getItem("kyc_session_id");
        if (!sessionId) {
          sessionId = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(
            /[xy]/g,
            function (c) {
              var r = (Math.random() * 16) | 0,
                v = c == "x" ? r : (r & 0x3) | 0x8;
              return v.toString(16);
            }
          );
          localStorage.setItem("kyc_session_id", sessionId);
        }

        // Check if video recording is already active
        if (!window.videoRecordingManager.isRecording) {
          try {
            // Initialize and start recording for this page
            const initialized =
              await window.videoRecordingManager.initializeSession(sessionId);

            if (initialized) {
              setTimeout(async () => {
                try {
                  await window.videoRecordingManager.startRecording();
                  console.log("✅ Verification page video recording started");
                } catch (error) {
                  console.warn(
                    "⚠️ Could not start video recording on verification page:",
                    error.message
                  );
                }
              }, 1000); // 1 second delay for verification page
            }
          } catch (error) {
            console.warn(
              "⚠️ Video recording initialization failed on verification page:",
              error.message
            );
          }
        } else {
          console.log("ℹ️ Video recording already active - continuing session");
        }
      });

      // Stop recording when user leaves the verification page
      window.addEventListener("beforeunload", function () {
        if (
          window.videoRecordingManager &&
          window.videoRecordingManager.isRecording
        ) {
          window.videoRecordingManager.stopRecording();
        }
      });
    </script>
  </body>
</html>
