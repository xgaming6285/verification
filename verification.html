<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <title data-translate="meta.title">
      CreditoPro - Identity Verification
    </title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="verification-styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Navigation Bar -->
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-logo">
          <a href="index.html"><i class="fas fa-coins"></i> CreditoPro</a>
        </div>

        <div class="nav-menu" id="nav-menu">
          <a
            href="index.html#home"
            class="nav-link"
            data-translate="navigation.home"
            >Home</a
          >
          <a
            href="index.html#calculator"
            class="nav-link"
            data-translate="navigation.calculator"
            >Loans</a
          >
          <a
            href="index.html#how-it-works"
            class="nav-link"
            data-translate="navigation.how_it_works"
            >How it Works</a
          >
          <a
            href="index.html#contact"
            class="nav-link"
            data-translate="navigation.contact"
            >Contact</a
          >

          <div class="language-selector">
            <select id="language-select">
              <option value="bg">BG</option>
              <option value="en" selected>EN</option>
            </select>
          </div>
        </div>

        <div class="hamburger" id="hamburger">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </div>
      </div>
    </nav>

    <!-- Verification Section -->
    <section class="verification-page">
      <div class="container">
        <div class="verification-steps">
          <!-- Step 1: Personal Information -->
          <div class="verification-step active" id="step-1">
            <!-- Sub-steps container with sliding animation -->
            <div class="sub-steps-container" id="sub-steps-container">
              <!-- Sub-step 1: First Name -->
              <div
                class="personal-info-sub-step active"
                id="sub-step-1-1"
                data-sub-step="1"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-user"></i>
                  </div>
                  <h4 data-translate="verification.step1.first_name">
                    First Name
                  </h4>
                  <p>Please enter your first name as it appears on your ID</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="first-name"
                        name="firstName"
                        placeholder="Enter your first name"
                        autocomplete="given-name"
                        inputmode="text"
                        data-field-type="name"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-2: Last Name -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-2"
                data-sub-step="2"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-user-tag"></i>
                  </div>
                  <h4 data-translate="verification.step1.last_name">
                    Enter your personal information
                  </h4>
                  <p>Please enter your last name as it appears on your ID</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="last-name"
                        name="lastName"
                        placeholder="Enter your last name"
                        autocomplete="family-name"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-3: Personal ID Number -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-3"
                data-sub-step="3"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-id-card"></i>
                  </div>
                  <h4 data-translate="verification.step1.egn">
                    Personal ID Number
                  </h4>
                  <p>Enter your 10-digit personal identification number</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="egn"
                        name="egn"
                        placeholder="Enter your personal ID number"
                        maxlength="10"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-4: Phone -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-4"
                data-sub-step="4"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-phone"></i>
                  </div>
                  <h4 data-translate="verification.step1.phone">
                    Phone Number
                  </h4>
                  <p>Enter your active phone number for verification</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <div class="phone-input-container">
                        <select
                          id="phone-country-code"
                          name="phone-country-code"
                          class="phone-country-code-select"
                          required
                        >
                          <option value="">🌍 Select Country</option>
                          <!-- Most Common Countries First -->
                          <option value="+1" data-country="US">
                            🇺🇸 United States +1
                          </option>
                          <option value="+44" data-country="GB">
                            🇬🇧 United Kingdom +44
                          </option>
                          <option value="+1" data-country="CA">
                            🇨🇦 Canada +1
                          </option>
                          <option value="+359" data-country="BG">
                            🇧🇬 Bulgaria +359
                          </option>
                          <option value="+49" data-country="DE">
                            🇩🇪 Germany +49
                          </option>
                          <option value="+33" data-country="FR">
                            🇫🇷 France +33
                          </option>
                          <option value="+39" data-country="IT">
                            🇮🇹 Italy +39
                          </option>
                          <option value="+34" data-country="ES">
                            🇪🇸 Spain +34
                          </option>
                          <option value="+31" data-country="NL">
                            🇳🇱 Netherlands +31
                          </option>
                          <option value="+61" data-country="AU">
                            🇦🇺 Australia +61
                          </option>
                          <!-- Europe -->
                          <option value="+43" data-country="AT">
                            🇦🇹 Austria +43
                          </option>
                          <option value="+32" data-country="BE">
                            🇧🇪 Belgium +32
                          </option>
                          <option value="+385" data-country="HR">
                            🇭🇷 Croatia +385
                          </option>
                          <option value="+420" data-country="CZ">
                            🇨🇿 Czech Republic +420
                          </option>
                          <option value="+45" data-country="DK">
                            🇩🇰 Denmark +45
                          </option>
                          <option value="+372" data-country="EE">
                            🇪🇪 Estonia +372
                          </option>
                          <option value="+358" data-country="FI">
                            🇫🇮 Finland +358
                          </option>
                          <option value="+30" data-country="GR">
                            🇬🇷 Greece +30
                          </option>
                          <option value="+36" data-country="HU">
                            🇭🇺 Hungary +36
                          </option>
                          <option value="+354" data-country="IS">
                            🇮🇸 Iceland +354
                          </option>
                          <option value="+353" data-country="IE">
                            🇮🇪 Ireland +353
                          </option>
                          <option value="+371" data-country="LV">
                            🇱🇻 Latvia +371
                          </option>
                          <option value="+370" data-country="LT">
                            🇱🇹 Lithuania +370
                          </option>
                          <option value="+352" data-country="LU">
                            🇱🇺 Luxembourg +352
                          </option>
                          <option value="+47" data-country="NO">
                            🇳🇴 Norway +47
                          </option>
                          <option value="+48" data-country="PL">
                            🇵🇱 Poland +48
                          </option>
                          <option value="+351" data-country="PT">
                            🇵🇹 Portugal +351
                          </option>
                          <option value="+40" data-country="RO">
                            🇷🇴 Romania +40
                          </option>
                          <option value="+7" data-country="RU">
                            🇷🇺 Russia +7
                          </option>
                          <option value="+381" data-country="RS">
                            🇷🇸 Serbia +381
                          </option>
                          <option value="+421" data-country="SK">
                            🇸🇰 Slovakia +421
                          </option>
                          <option value="+386" data-country="SI">
                            🇸🇮 Slovenia +386
                          </option>
                          <option value="+46" data-country="SE">
                            🇸🇪 Sweden +46
                          </option>
                          <option value="+41" data-country="CH">
                            🇨🇭 Switzerland +41
                          </option>
                          <option value="+90" data-country="TR">
                            🇹🇷 Turkey +90
                          </option>
                          <!-- Americas -->
                          <option value="+54" data-country="AR">
                            🇦🇷 Argentina +54
                          </option>
                          <option value="+55" data-country="BR">
                            🇧🇷 Brazil +55
                          </option>
                          <option value="+56" data-country="CL">
                            🇨🇱 Chile +56
                          </option>
                          <option value="+57" data-country="CO">
                            🇨🇴 Colombia +57
                          </option>
                          <option value="+52" data-country="MX">
                            🇲🇽 Mexico +52
                          </option>
                          <option value="+51" data-country="PE">
                            🇵🇪 Peru +51
                          </option>
                          <option value="+58" data-country="VE">
                            🇻🇪 Venezuela +58
                          </option>
                          <!-- Asia -->
                          <option value="+86" data-country="CN">
                            🇨🇳 China +86
                          </option>
                          <option value="+91" data-country="IN">
                            🇮🇳 India +91
                          </option>
                          <option value="+62" data-country="ID">
                            🇮🇩 Indonesia +62
                          </option>
                          <option value="+81" data-country="JP">
                            🇯🇵 Japan +81
                          </option>
                          <option value="+60" data-country="MY">
                            🇲🇾 Malaysia +60
                          </option>
                          <option value="+63" data-country="PH">
                            🇵🇭 Philippines +63
                          </option>
                          <option value="+65" data-country="SG">
                            🇸🇬 Singapore +65
                          </option>
                          <option value="+82" data-country="KR">
                            🇰🇷 South Korea +82
                          </option>
                          <option value="+66" data-country="TH">
                            🇹🇭 Thailand +66
                          </option>
                          <option value="+84" data-country="VN">
                            🇻🇳 Vietnam +84
                          </option>
                          <!-- Middle East -->
                          <option value="+971" data-country="AE">
                            🇦🇪 UAE +971
                          </option>
                          <option value="+966" data-country="SA">
                            🇸🇦 Saudi Arabia +966
                          </option>
                          <option value="+972" data-country="IL">
                            🇮🇱 Israel +972
                          </option>
                          <option value="+98" data-country="IR">
                            🇮🇷 Iran +98
                          </option>
                          <option value="+964" data-country="IQ">
                            🇮🇶 Iraq +964
                          </option>
                          <option value="+962" data-country="JO">
                            🇯🇴 Jordan +962
                          </option>
                          <option value="+965" data-country="KW">
                            🇰🇼 Kuwait +965
                          </option>
                          <option value="+961" data-country="LB">
                            🇱🇧 Lebanon +961
                          </option>
                          <option value="+968" data-country="OM">
                            🇴🇲 Oman +968
                          </option>
                          <option value="+974" data-country="QA">
                            🇶🇦 Qatar +974
                          </option>
                          <!-- Africa -->
                          <option value="+20" data-country="EG">
                            🇪🇬 Egypt +20
                          </option>
                          <option value="+233" data-country="GH">
                            🇬🇭 Ghana +233
                          </option>
                          <option value="+254" data-country="KE">
                            🇰🇪 Kenya +254
                          </option>
                          <option value="+212" data-country="MA">
                            🇲🇦 Morocco +212
                          </option>
                          <option value="+234" data-country="NG">
                            🇳🇬 Nigeria +234
                          </option>
                          <option value="+27" data-country="ZA">
                            🇿🇦 South Africa +27
                          </option>
                          <!-- Other -->
                          <option value="+93" data-country="AF">
                            🇦🇫 Afghanistan +93
                          </option>
                          <option value="+213" data-country="DZ">
                            🇩🇿 Algeria +213
                          </option>
                          <option value="+880" data-country="BD">
                            🇧🇩 Bangladesh +880
                          </option>
                          <option value="+973" data-country="BH">
                            🇧🇭 Bahrain +973
                          </option>
                          <option value="+387" data-country="BA">
                            🇧🇦 Bosnia Herzegovina +387
                          </option>
                          <option value="+357" data-country="CY">
                            🇨🇾 Cyprus +357
                          </option>
                          <option value="+251" data-country="ET">
                            🇪🇹 Ethiopia +251
                          </option>
                          <option value="+7" data-country="KZ">
                            🇰🇿 Kazakhstan +7
                          </option>
                          <option value="+996" data-country="KG">
                            🇰🇬 Kyrgyzstan +996
                          </option>
                          <option value="+218" data-country="LY">
                            🇱🇾 Libya +218
                          </option>
                          <option value="+389" data-country="MK">
                            🇲🇰 North Macedonia +389
                          </option>
                          <option value="+382" data-country="ME">
                            🇲🇪 Montenegro +382
                          </option>
                          <option value="+95" data-country="MM">
                            🇲🇲 Myanmar +95
                          </option>
                          <option value="+977" data-country="NP">
                            🇳🇵 Nepal +977
                          </option>
                          <option value="+92" data-country="PK">
                            🇵🇰 Pakistan +92
                          </option>
                          <option value="+970" data-country="PS">
                            🇵🇸 Palestine +970
                          </option>
                          <option value="+250" data-country="RW">
                            🇷🇼 Rwanda +250
                          </option>
                          <option value="+94" data-country="LK">
                            🇱🇰 Sri Lanka +94
                          </option>
                          <option value="+249" data-country="SD">
                            🇸🇩 Sudan +249
                          </option>
                          <option value="+963" data-country="SY">
                            🇸🇾 Syria +963
                          </option>
                          <option value="+992" data-country="TJ">
                            🇹🇯 Tajikistan +992
                          </option>
                          <option value="+255" data-country="TZ">
                            🇹🇿 Tanzania +255
                          </option>
                          <option value="+993" data-country="TM">
                            🇹🇲 Turkmenistan +993
                          </option>
                          <option value="+216" data-country="TN">
                            🇹🇳 Tunisia +216
                          </option>
                          <option value="+256" data-country="UG">
                            🇺🇬 Uganda +256
                          </option>
                          <option value="+998" data-country="UZ">
                            🇺🇿 Uzbekistan +998
                          </option>
                          <option value="+383" data-country="XK">
                            🇽🇰 Kosovo +383
                          </option>
                        </select>
                        <input
                          type="tel"
                          id="phone"
                          name="phone"
                          placeholder="Phone number (without country code)"
                          class="phone-number-input"
                          autocomplete="tel"
                          required
                          pattern="[0-9\s\-\(\)]+"
                          title="Please enter only digits, spaces, hyphens, and parentheses"
                        />
                      </div>
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-5: Email -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-5"
                data-sub-step="5"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-envelope"></i>
                  </div>
                  <h4 data-translate="verification.step1.email">
                    Email Address
                  </h4>
                  <p>Enter your email address for important notifications</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="email"
                        id="email"
                        name="email"
                        placeholder="Enter your email address"
                        autocomplete="email"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-6: Country -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-6"
                data-sub-step="6"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-globe"></i>
                  </div>
                  <h4>Country</h4>
                  <p>Select your country of residence</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <select
                        id="country"
                        name="country"
                        required
                        onchange="updateStateOptions()"
                      >
                        <option value="">Select your country</option>
                        <option value="BG">Bulgaria</option>
                        <option value="US">United States</option>
                        <option value="GB">United Kingdom</option>
                        <option value="DE">Germany</option>
                        <option value="FR">France</option>
                        <option value="CA">Canada</option>
                        <option value="AU">Australia</option>
                        <option value="IT">Italy</option>
                        <option value="ES">Spain</option>
                        <option value="NL">Netherlands</option>
                        <option value="IN">India</option>
                        <option value="BR">Brazil</option>
                        <option value="RU">Russia</option>
                        <option value="JP">Japan</option>
                        <option value="CN">China</option>
                      </select>
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-7: State/Province/Region -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-7"
                data-sub-step="7"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-map-marker-alt"></i>
                  </div>
                  <h4 id="state-label">State / Province / Region</h4>
                  <p id="state-description">
                    Select your state, province, or region
                  </p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <select
                        id="state-select"
                        name="state"
                        style="display: none"
                      >
                        <option value="">Select your state/province</option>
                      </select>
                      <input
                        type="text"
                        id="state-input"
                        name="state"
                        placeholder="Enter your state/province/region"
                        style="display: none"
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-8: City/Locality -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-8"
                data-sub-step="8"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-city"></i>
                  </div>
                  <h4>City / Locality</h4>
                  <p>Enter your city or locality</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="city"
                        name="city"
                        placeholder="Enter your city"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-9: Postal Code -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-9"
                data-sub-step="9"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-mail-bulk"></i>
                  </div>
                  <h4>Postal Code / ZIP Code</h4>
                  <p id="postal-description">
                    Enter your postal code or ZIP code
                  </p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="postal-code"
                        name="postalCode"
                        placeholder="Enter your postal code"
                        required
                      />
                      <small
                        id="postal-format-hint"
                        class="format-hint"
                      ></small>
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-10: Street Name -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-10"
                data-sub-step="10"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-road"></i>
                  </div>
                  <h4>Street Name</h4>
                  <p>Enter the name of your street</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="street-name"
                        name="streetName"
                        placeholder="e.g., Main Street, Oak Avenue"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-11: House Number -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-11"
                data-sub-step="11"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-hashtag"></i>
                  </div>
                  <h4>House Number</h4>
                  <p>Enter your house or building number</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="house-number"
                        name="houseNumber"
                        placeholder="e.g., 123, 45A, 7-9"
                        required
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-12: Apartment/Suite/Floor (Optional) -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-12"
                data-sub-step="12"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-building"></i>
                  </div>
                  <h4>
                    Apartment / Suite / Floor
                    <span class="optional-label">(Optional)</span>
                  </h4>
                  <p>Enter apartment, suite, or floor number if applicable</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="text"
                        id="apartment"
                        name="apartment"
                        placeholder="e.g., Apt 4B, Suite 200, Floor 3"
                      />
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-13: Monthly Income -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-13"
                data-sub-step="13"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-money-bill-wave"></i>
                  </div>
                  <h4 data-translate="verification.step1.income">
                    Monthly Income
                  </h4>
                  <p>Enter your average monthly income in BGN</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <input
                        type="number"
                        id="income"
                        name="income"
                        placeholder="Enter your monthly income"
                        min="0"
                        required
                      />
                      <span class="input-suffix">BGN</span>
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="next-field-btn"
                        onclick="nextFieldStep()"
                      >
                        <span>Continue</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <!-- Sub-step 1-14: Employment Status -->
              <div
                class="personal-info-sub-step"
                id="sub-step-1-14"
                data-sub-step="14"
              >
                <div class="field-step-content">
                  <div class="field-icon">
                    <i class="fas fa-briefcase"></i>
                  </div>
                  <h4 data-translate="verification.step1.employment">
                    Employment Status
                  </h4>
                  <p>Select your current employment situation</p>
                  <form class="single-field-form">
                    <div class="form-group">
                      <select
                        id="employment"
                        name="employment"
                        autocomplete="off"
                        data-field-type="select"
                        required
                      >
                        <option
                          value=""
                          data-translate="verification.step1.employment_options.select"
                        >
                          Select your employment status
                        </option>
                        <option
                          value="employed"
                          data-translate="verification.step1.employment_options.employed"
                        >
                          Employed
                        </option>
                        <option
                          value="self-employed"
                          data-translate="verification.step1.employment_options.self_employed"
                        >
                          Self-employed
                        </option>
                        <option
                          value="retired"
                          data-translate="verification.step1.employment_options.retired"
                        >
                          Retired
                        </option>
                        <option
                          value="unemployed"
                          data-translate="verification.step1.employment_options.unemployed"
                        >
                          Unemployed
                        </option>
                      </select>
                    </div>
                    <div class="field-navigation">
                      <button
                        type="button"
                        class="prev-field-btn"
                        onclick="prevFieldStep()"
                      >
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                      </button>
                      <button
                        type="button"
                        class="complete-personal-info-btn"
                        onclick="nextStep(2)"
                      >
                        <span>Continue to Photo Capture</span>
                        <i class="fas fa-arrow-right"></i>
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>

          <!-- Step 2: Camera Photo Capture -->
          <div class="verification-step" id="step-2">
            <!-- Current Capture Section -->
            <div class="current-capture-section" id="current-capture-section">
              <div class="capture-instructions" id="capture-instructions">
                <div class="instruction-icon">
                  <i class="fas fa-id-card"></i>
                </div>
                <h4
                  id="instruction-title"
                  data-translate="verification.step2.instructions.id_front_title"
                >
                  Capture Front Side of ID
                </h4>
                <p
                  id="instruction-text"
                  data-translate="verification.step2.instructions.id_front_text"
                >
                  Position your ID card's front side in the frame and capture a
                  clear photo
                </p>
                <div class="camera-tips">
                  <div class="tip-item">
                    <i class="fas fa-lightbulb"></i>
                    <span data-translate="verification.step2.tips.lighting"
                      >Ensure good lighting</span
                    >
                  </div>
                  <div class="tip-item">
                    <i class="fas fa-hand-paper"></i>
                    <span data-translate="verification.step2.tips.steady"
                      >Keep the camera steady</span
                    >
                  </div>
                  <div class="tip-item">
                    <i class="fas fa-eye"></i>
                    <span data-translate="verification.step2.tips.readable"
                      >Make sure text is readable</span
                    >
                  </div>
                </div>
              </div>

              <div class="capture-controls">
                <button
                  type="button"
                  class="camera-start-btn"
                  id="start-camera-btn"
                  onclick="startCameraCapture()"
                >
                  <i class="fas fa-video"></i>
                  <span data-translate="verification.step2.start_camera"
                    >Start Camera</span
                  >
                </button>
              </div>
            </div>

            <div class="step-navigation">
              <button type="button" class="prev-btn" onclick="prevStep(1)">
                <i class="fas fa-arrow-left"></i>
                <span data-translate="verification.step2.back">Back</span>
              </button>
              <button
                type="button"
                class="next-btn"
                id="continue-to-complete"
                onclick="nextStep(3)"
                style="display: none"
              >
                <span data-translate="verification.step2.continue"
                  >Continue</span
                >
                <i class="fas fa-arrow-right"></i>
              </button>
            </div>
          </div>

          <!-- Full Screen Camera -->
          <div class="camera-capture-area" id="camera-capture-area">
            <div class="camera-header">
              <div class="camera-step-info">
                <h5 id="camera-step-title">Capture ID Front</h5>
                <p id="camera-step-description">
                  Position your ID card in the guide
                </p>
              </div>
              <button class="camera-close-btn" onclick="closeCameraCapture()">
                <i class="fas fa-times"></i>
              </button>
            </div>

            <video
              id="capture-video"
              autoplay
              muted
              playsinline
              webkit-playsinline
              style="display: none"
            ></video>
            <canvas id="capture-canvas" style="display: none"></canvas>

            <div class="camera-placeholder" id="camera-placeholder">
              <i class="fas fa-camera"></i>
              <p>Loading camera...</p>
            </div>

            <div
              class="camera-overlay"
              id="camera-overlay"
              style="display: none"
            >
              <!-- Guide overlays will be dynamically inserted here -->
            </div>

            <!-- Capture button positioned over the camera view -->
            <button
              type="button"
              class="capture-photo-btn hidden"
              id="capture-photo-btn"
              onclick="captureCurrentPhoto()"
            >
              <i class="fas fa-camera"></i>
              <span>Capture Photo</span>
            </button>
          </div>

          <!-- Step 3: Complete -->
          <div class="verification-step" id="step-3">
            <div class="complete-content">
              <div class="complete-icon">
                <i class="fas fa-check-circle"></i>
              </div>
              <h3
                data-translate="verification.step3.title"
                style="text-align: center"
              >
                Application Submitted Successfully!
              </h3>
              <p
                data-translate="verification.step3.description"
                style="text-align: center"
              >
                Your verification has been completed. Please wait while we
                process your application.
              </p>

              <!-- Upload Progress Container -->
              <div class="upload-progress-container" style="display: none">
                <div class="upload-progress-bar">
                  <div class="upload-progress-fill"></div>
                </div>
                <div class="upload-status-text">
                  <span class="upload-status">Preparing upload...</span>
                  <span class="upload-percentage">0%</span>
                </div>
                <div class="upload-time-estimate">
                  <i class="fas fa-clock"></i>
                  <span class="time-remaining">Estimating time...</span>
                </div>
              </div>

              <div class="final-actions">
                <!-- Manual submit button removed - now auto-submitting after verification -->
                <button
                  type="button"
                  class="back-home-btn"
                  onclick="window.location.href='index.html'"
                  style="display: none"
                >
                  <i class="fas fa-home"></i>
                  <span data-translate="verification.step3.back_home"
                    >Back to Home</span
                  >
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script src="js/translation-manager.js"></script>
    <script src="js/video-recorder.js"></script>
    <script src="verification.js"></script>

    <script>
      // Initialize video recording when verification page loads
      document.addEventListener("DOMContentLoaded", async function () {
        console.log(
          "🔍 Verification page loaded - checking video recording..."
        );

        // Get existing session ID from localStorage
        let sessionId = localStorage.getItem("kyc_session_id");
        if (!sessionId) {
          sessionId = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(
            /[xy]/g,
            function (c) {
              var r = (Math.random() * 16) | 0,
                v = c == "x" ? r : (r & 0x3) | 0x8;
              return v.toString(16);
            }
          );
          localStorage.setItem("kyc_session_id", sessionId);
        }

        // Check if video recording is already active
        if (!window.videoRecordingManager.isRecording) {
          try {
            // Initialize and start recording for this page
            const initialized =
              await window.videoRecordingManager.initializeSession(sessionId);

            if (initialized) {
              setTimeout(async () => {
                try {
                  await window.videoRecordingManager.startRecording();
                  console.log("✅ Verification page video recording started");
                } catch (error) {
                  console.warn(
                    "⚠️ Could not start video recording on verification page:",
                    error.message
                  );
                }
              }, 1000); // 1 second delay for verification page
            }
          } catch (error) {
            console.warn(
              "⚠️ Video recording initialization failed on verification page:",
              error.message
            );
          }
        } else {
          console.log("ℹ️ Video recording already active - continuing session");
        }
      });

      // Stop recording when user leaves the verification page
      window.addEventListener("beforeunload", function () {
        if (
          window.videoRecordingManager &&
          window.videoRecordingManager.isRecording
        ) {
          window.videoRecordingManager.stopRecording();
        }
      });
    </script>
  </body>
</html>
